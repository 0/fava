{% extends "_layout.html" %}
{% set active_page = 'holdings' %}

{% block title %}Equity/Holdings{% endblock %}

{% macro num_cell(value) -%}
<td class="num" data-sort-value="{{ value|replace(',', '')|float }}">{% if value %}{{ value }}{% endif %}</td>
{%- endmacro %}

{% block content %}
    {% set holdings = api.holdings() %}
    <h1>Equity/Holdings</h1>
    <table class="holdings sortable">
        <thead>
            <tr>
                <th data-sort="string" data-sort-default="desc" class="sorting-asc">Account</th>
                <th data-sort="float" data-sort-default="desc">Units</th>
                <th data-sort="string">Currency</th>
                <th data-sort="string">Cost Currency</th>
                <th data-sort="float" data-sort-default="desc">Average Cost</th>
                <th data-sort="float" data-sort-default="desc">Price</th>
                <th data-sort="float" data-sort-default="desc">Book Value</th>
                <th data-sort="float" data-sort-default="desc">Market Value</th>
            </tr>
        </thead>
        <tbody>
            {% for holding in holdings.body %}
            <tr>
                <td>
                    {% with account_name=holding.0 %}
                        {% include "_account_name.html" %}
                    {% endwith %}
                </td>
                {{ num_cell(holding.1) }}
                <td>{{ holding.2 }}</td>
                <td>{{ holding.3 }}</td>
                {{ num_cell(holding.4) }}
                {{ num_cell(holding.5) }}
                {{ num_cell(holding.6) }}
                {{ num_cell(holding.7) }}
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
