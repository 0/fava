{% set navigation_bar = [
    ("", [
        ('income_statement', 'Income Statement'),
        ('balance_sheet',    'Balance Sheet'),
        ('trial_balance',    'Trial Balance'),
        ('journal',          'General Journal'),
    ]),
    ("Other", [
        ('holdings',         'Equity/Holdings'),
        ('net_worth',        'Net Worth'),
        ('documents',        'Documents'),
        ('notes',            'Notes'),
        ('events',           'Events'),
        ('commodities',      'Commodities'),
    ]),
    ("Configuration", [
        ('source',           'Source'),
        ('options',          'Options'),
        ('statistics',       'Statistics'),
        ('errors',           'Errors'),
    ])
] %}
{% set active_page = active_page|default('journal') %}
<!doctype html>
<html>
<head>
    {% block head %}
    <link href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAAF0lEQVRIx2NgGAWjYBSMglEwCkbBSAcACBAAAeaR9cIAAAAASUVORK5CYII=" rel="shortcut icon" type="image/x-icon" id="favicon"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='stylesheets/styles.css') }}">
    <title>{% block title %}{% endblock %} - {{ title }}</title>
    {% endblock %}
    <script>window.chartData = [];</script>
</head>
<body>
    {% with messages = get_flashed_messages() %}
    {% if not options['operating_currency'] or messages %}
        <ul class="warnings">
            {% if not options['operating_currency'] %}
            <li class="error">
                    No <code>operating_currency</code> specified.
                    Add <code>option "operating_currency" "USD"</code> to your beancount file.
            </li>
            {% endif %}
            {% if messages %}
            {% for message in messages %}
            <li class="error">
                {{ message }}
            </li>
            {% endfor %}
            {% endif %}
        </ul>
    {% endif %}
    {% endwith %}
    <header>
        <div class="branding">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAsVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+3mHKcAAAAOnRSTlMAAQMEBQYHCAwNDg8QExkaISImJzQ7RUZHSUtVZGtsb3FzdXd4f5WYm56jr7y+xcfP2tze4OLk6/X9+wsXVgAAAMJJREFUKFPFkWkTgiAYhDG1wy677VSzw0q6pKz3//+wBGRkGO2r+4ndZ9hhFoQq0AaXKZoiKFfE4Uzt82iKOWyrcJjDJU90N45dnZ/3HCbrPvfmE64YHkZ216MQi6rwPUBp0VF4GVrQowlAqwA6cN8xKJ4uwyDNGdz+g0EBnAvoFEALxjZC9gIsCd60zJy6ZqpRmFmNLfQ9NJirE7pWbDLTuYj5SI0Fhk+IzwdqfvLhJ0jRSvqVl/rRCYdnKNVG7atcP+gmOQsBuK8NAAAAAElFTkSuQmCC" alt="">
            <h1 class="site-name">{{ title or 'Beancount Web' }}</h1>
        </div>
        <nav>
            {% include "_entry_filters.html" %}
        </nav>
    </header>
    <div class="main">
        <aside>
            {% for title_, menuitems in navigation_bar %}
                {% if title_ %}<h3>{{ title_ }}</h3>{% endif %}
                <ul class="navigation">
                {% for id, caption in menuitems %}
                    <li{% if id == active_page %} class="selected"{% endif %}><a href="{{ url_for('report', report_name=id) }}">{{ caption|e }}{% if id == 'errors' and errors|length > 0 %}<span>{{ errors|length }}</span>{% endif %}</a></li>
                {% endfor %}
                </ul>
            {% endfor %}
        </aside>
        <article>
            {% block content %}{% endblock %}
        </article>
    </div>

    {% assets "vendor/jquery-js/jquery-2.1.4.js",
              "vendor/chartist-js/chartist.js",
              "vendor/chartist-js/chartist-plugin-legend.js",
              "vendor/chartist-js/chartist-plugin-tooltip.js",
              "vendor/jquery-treemap-js/jquery-treemap.js",
              "vendor/jquery-query-object-js/jquery.query-object.js",
              "javascript/helpers.js",
              "javascript/charts.js",
              "javascript/main.js" %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
    {% block javascript %}{% endblock %}
</body>
</html>
