{% extends "_layout.html" %}
{% set active_page = 'account' %}

{% block title %}Account {{Â account.name }}{% endblock %}

{% block content %}
    <h1>{{ account.name }}</h1>

    {% include "_chart_skeleton.html" %}
    <script>
        window.chart_data.push({
            label: "Account balance",
            type: "line",
            data: {
                series: [
                    {% for currency in operating_currencies %}
                        {
                            name: 'account_balance_{{ currency }}',
                            data: [
                                {% for row in chart_data -%}
                                    {% if currency in row.balance -%}
                                    { x: new Date({{ row.date.year }}, {{ row.date.month-1 }}, {{ row.date.day }}), y: {{ row.balance[currency] or '0' }} },
                                    {% endif -%}
                                {% endfor -%}
                            ]
                        },
                    {% endfor %}
                ]
            }
        });
    </script>
    {% with monthly_totals = account.monthly_totals %}
        {% include "_chart_monthly_totals.html" %}
    {% endwith %}

    <h3>Journal</h3>
    {% with journal=account.journal, show_tablefilter=True %}
        {% include "_journal_table.html" %}
    {% endwith %}
{% endblock %}
