{# {{ name }} {{ value }} {{ type }} #}

{% if type|string == "<class 'beancount.core.inventory.Inventory'>" %}
    <td class="num">
    {% for position in value.cost() %}
        {% if position.number != 0 %}
            {{ position.number|format_currency }} {{ position.lot.currency }}<br>
        {% endif %}
    {% endfor %}
    </td>
{% elif type|string == "<class 'str'>" %}
    <td>
        {% if name == "account" %}
            {% with account_name=value %}
                {% include "_account_name.html" %}
            {% endwith %}
        {% else %}
            {{value }}
        {% endif %}
        {# TODO do the same for payee(s) and tag(s) #}
    </td>
{% elif type|string == "<class 'decimal.Decimal'>" %}
    <td class="num" data-sort-value="{{ value }}">{{ value|format_currency }}</td>
{% elif type|string == "<class 'bool'>" %}
    <td>{{ value|upper }}</td>
{% elif type|string == "<class 'int'>" %}
    <td class="num">{{ value }}</td>
{% elif type|string == "<class 'set'>" %}
    <td>{{ value|join(',') }}</td>
{% elif type|string == "<class 'datetime.date'>" %}
    <td>{{ value }}</td>
{% elif type|string == "<class 'beancount.core.position.Position'>" %}
    <td class="num">{{ value.number|format_currency }} {{value.lot.currency }}</td>
{% else %}
    <td style="background: #990000; color: white; font-family: monospace;" title="Type {{ type|string }} not recognized">{{ value }}</td>
{% endif %}
