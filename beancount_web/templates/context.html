{% extends "_layout.html" %}
{% set active_page = 'context' %}

{% block title %}Context{% endblock %}

{% block javascript %}
    {% assets
        filters="rjsmin",
        output="stylesheets/packed-editor.js",
        "vendor/ace-js/ace.js",
        "vendor/ace-js/ext-searchbox.js",
        "vendor/ace-js/mode-beancount.js",
        "vendor/ace-js/theme-chrome.js",
        "javascript/editor.js" %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}

    {% assets
        output="stylesheets/packed-journal.js",
        "vendor/handlebars-js/handlebars-v4.0.5.js",
        "javascript/journal.js" %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
{% endblock %}

{% block content %}
    <h1>Context: <code>{{Â context.hash }}</code></h1>

    {% for context_ in context.contexts %}
        <dl>
            <dt>Hash:</dt>
            <dd><code>{{ context_.hash }}</code></dd>
            <dt>Location:</dt>
            <dd><code><a href="{{ url_for('source') }}?file_path={{context_.filename }}&line={{ context_.line }}" title="Show source {{ context_.filename }}:{{ context_.line }}">{{ context_.filename }}:{{ context_.line }}</a></code></dd>
        </dl>
        <div class="editor-wrapper editor-wrapper-readonly">
            <div class="editor editor-readonly" id="editor-{{ context.hash }}">
                <pre><code>{{ context_.context|safe }}</code></pre>
            </div>
        </div>
    {% endfor %}

    <h3>Matching Journal Entries</h3>
    {% with journal=context.journal %}
        {% include "_journal_table.html" %}
    {% endwith %}
{% endblock %}
